<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¹¿å‘Šæ”¶ç›Šæ¸¸æˆ - æ™ºèƒ½å…¼å®¹ç‰ˆ</title>
    
    <style>
        /* ä¿æŒåŸæœ‰çš„ä¸‰åˆ—æ ·å¼ */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            font-family: 'Arial', 'Microsoft YaHei', sans-serif;
            padding: 20px;
            min-height: 100vh;
            color: #fff;
        }
        
        .three-columns {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 25px;
            max-width: 1000px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .ad-column {
            width: 3cm;
            min-height: 5cm;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            padding: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
        }
        
        /* ... å…¶ä»–æ ·å¼ä¿æŒä¸å˜ ... */
    </style>
</head>
<body>
    <!-- æ§åˆ¶é¢æ¿ -->
    <div class="control-panel">
        <div style="text-align:center;margin-bottom:10px;font-size:12px;color:#aaa;">ğŸ® æ¸¸æˆæ§åˆ¶</div>
        <button onclick="showAllAds()" style="background:#4CAF50;color:white;border:none;padding:8px;border-radius:5px;margin:2px;width:100%;">
            ğŸš€ ä¸€é”®æµ‹è¯•
        </button>
        <button onclick="resetGame()" style="background:#FF9800;color:white;border:none;padding:8px;border-radius:5px;margin:2px;width:100%;">
            ğŸ”„ é‡ç½®æ•°æ®
        </button>
        <button onclick="showModeInfo()" style="background:#2196F3;color:white;border:none;padding:8px;border-radius:5px;margin:2px;width:100%;">
            â„¹ï¸ æ¨¡å¼è¯´æ˜
        </button>
    </div>
    
    <!-- æ¨¡å¼çŠ¶æ€ -->
    <div id="mode-status" style="position:fixed;top:15px;right:15px;background:#FF9800;color:white;padding:8px 15px;border-radius:20px;font-size:12px;font-weight:bold;">
        ğŸ¬ æ¨¡æ‹Ÿæ¨¡å¼
    </div>
    
    <!-- ä¸‰åˆ—å¹¿å‘Šçª—å£ -->
    <div class="three-columns">
        <!-- å¹¿å‘Šä½1 -->
        <div class="ad-column">
            <div style="position:absolute;top:10px;left:10px;background:#667eea;color:white;width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:12px;">
                1
            </div>
            <div style="text-align:center;width:100%;margin-top:30px;">
                <div style="font-size:14px;font-weight:bold;">å¹¿å‘Šä½ 1</div>
                <div id="status1" style="background:rgba(0,0,0,0.3);padding:10px;border-radius:8px;margin:10px 0;min-height:50px;display:flex;align-items:center;justify-content:center;">
                    âœ… å‡†å¤‡å°±ç»ª
                </div>
                <div style="font-size:12px;color:#ccc;">æ”¶ç›Š: <span id="earnings1" style="color:#4CAF50;font-weight:bold;">$0.00</span></div>
                <button onclick="showAd(1)" id="btn1" style="background:linear-gradient(135deg,#4CAF50,#2E7D32);color:white;border:none;padding:10px 0;border-radius:20px;width:100%;margin-top:10px;cursor:pointer;">
                    ğŸ¬ è§‚çœ‹å¹¿å‘Š
                </button>
            </div>
        </div>
        
        <!-- å¹¿å‘Šä½2 -->
        <div class="ad-column">
            <div style="position:absolute;top:10px;left:10px;background:#667eea;color:white;width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:12px;">
                2
            </div>
            <div style="text-align:center;width:100%;margin-top:30px;">
                <div style="font-size:14px;font-weight:bold;">å¹¿å‘Šä½ 2</div>
                <div id="status2" style="background:rgba(0,0,0,0.3);padding:10px;border-radius:8px;margin:10px 0;min-height:50px;display:flex;align-items:center;justify-content:center;">
                    âœ… å‡†å¤‡å°±ç»ª
                </div>
                <div style="font-size:12px;color:#ccc;">æ”¶ç›Š: <span id="earnings2" style="color:#4CAF50;font-weight:bold;">$0.00</span></div>
                <button onclick="showAd(2)" id="btn2" style="background:linear-gradient(135deg,#4CAF50,#2E7D32);color:white;border:none;padding:10px 0;border-radius:20px;width:100%;margin-top:10px;cursor:pointer;">
                    ğŸ¬ è§‚çœ‹å¹¿å‘Š
                </button>
            </div>
        </div>
        
        <!-- å¹¿å‘Šä½3 -->
        <div class="ad-column">
            <div style="position:absolute;top:10px;left:10px;background:#667eea;color:white;width:20px;height:20px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:12px;">
                3
            </div>
            <div style="text-align:center;width:100%;margin-top:30px;">
                <div style="font-size:14px;font-weight:bold;">å¹¿å‘Šä½ 3</div>
                <div id="status3" style="background:rgba(0,0,0,0.3);padding:10px;border-radius:8px;margin:10px 0;min-height:50px;display:flex;align-items:center;justify-content:center;">
                    âœ… å‡†å¤‡å°±ç»ª
                </div>
                <div style="font-size:12px;color:#ccc;">æ”¶ç›Š: <span id="earnings3" style="color:#4CAF50;font-weight:bold;">$0.00</span></div>
                <button onclick="showAd(3)" id="btn3" style="background:linear-gradient(135deg,#4CAF50,#2E7D32);color:white;border:none;padding:10px 0;border-radius:20px;width:100%;margin-top:10px;cursor:pointer;">
                    ğŸ¬ è§‚çœ‹å¹¿å‘Š
                </button>
            </div>
        </div>
    </div>
    
    <!-- æ”¶ç›Šç»Ÿè®¡ -->
    <div style="background:rgba(255,255,255,0.1);border-radius:15px;padding:20px;max-width:1000px;margin:20px auto;">
        <h3 style="text-align:center;margin-bottom:20px;">ğŸ“Š æ”¶ç›Šç»Ÿè®¡</h3>
        <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:10px;margin-bottom:20px;">
            <div style="text-align:center;">
                <div style="font-size:11px;color:#aaa;">ä»Šæ—¥æ”¶ç›Š</div>
                <div id="todayEarnings" style="font-size:20px;font-weight:bold;">$0.00</div>
            </div>
            <div style="text-align:center;">
                <div style="font-size:11px;color:#aaa;">ç´¯è®¡æ”¶ç›Š</div>
                <div id="totalEarnings" style="font-size:20px;font-weight:bold;">$0.00</div>
            </div>
            <div style="text-align:center;">
                <div style="font-size:11px;color:#aaa;">å¹¿å‘Šå±•ç¤º</div>
                <div id="impressions" style="font-size:20px;font-weight:bold;">0</div>
            </div>
            <div style="text-align:center;">
                <div style="font-size:11px;color:#aaa;">ç‚¹å‡»ç‡</div>
                <div id="clickRate" style="font-size:20px;font-weight:bold;">0%</div>
            </div>
        </div>
        
        <!-- æ—¥æ”¶ç›Šè¡¨ -->
        <div style="border-top:1px solid rgba(255,255,255,0.1);padding-top:20px;">
            <h4 style="text-align:center;margin-bottom:10px;">ğŸ“… æ—¥æ”¶ç›Šè®°å½•</h4>
            <div style="overflow-x:auto;">
                <table style="width:100%;font-size:12px;border-collapse:collapse;">
                    <thead>
                        <tr style="background:rgba(0,0,0,0.3);">
                            <th style="padding:10px;">æ—¥æœŸ</th>
                            <th style="padding:10px;">æ—¶é—´</th>
                            <th style="padding:10px;">å¹¿å‘Šä½</th>
                            <th style="padding:10px;">æ”¶ç›Š</th>
                        </tr>
                    </thead>
                    <tbody id="dailyRecords">
                        <tr>
                            <td colspan="4" style="text-align:center;padding:20px;color:#aaa;">æš‚æ— è®°å½•</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // ========== ç®€åŒ–é…ç½® ==========
        const CONFIG = {
            // ğŸ¯ æ ¸å¿ƒç­–ç•¥ï¼šä»¥æ¨¡æ‹Ÿæ¨¡å¼ä¸ºä¸»
            mode: 'simulation', // simulation | real
            adCooldown: 30,
            baseEarnings: 0.35
        };
        
        // ========== æ¸¸æˆæ•°æ® ==========
        let gameData = {
            impressions: 0,
            clicks: 0,
            todayEarnings: 0,
            totalEarnings: 0,
            adCooldowns: [0, 0, 0],
            adEarnings: [0, 0, 0],
            dailyRecords: [],
            todayDate: new Date().toLocaleDateString('zh-CN')
        };
        
        // ========== æ™ºèƒ½å¹¿å‘Šç³»ç»Ÿ ==========
        class SmartAdSystem {
            constructor() {
                console.log('ğŸ® æ™ºèƒ½å¹¿å‘Šç³»ç»Ÿå¯åŠ¨');
                console.log('ğŸ¯ å½“å‰æ¨¡å¼: æ¨¡æ‹Ÿæ¨¡å¼ï¼ˆå…¼å®¹æ‰€æœ‰ç”¨æˆ·ï¼‰');
                console.log('ğŸ’¡ æç¤ºï¼šæµ·å¤–/VPNç”¨æˆ·å¯åˆ‡æ¢çœŸå®æ¨¡å¼');
                
                this.updateModeDisplay();
                this.autoCheckRealMode();
            }
            
            // è‡ªåŠ¨æ£€æµ‹æ˜¯å¦å¯åˆ‡æ¢åˆ°çœŸå®æ¨¡å¼
            autoCheckRealMode() {
                // å»¶è¿Ÿæ£€æµ‹ï¼Œé¿å…å½±å“é¡µé¢åŠ è½½
                setTimeout(async () => {
                    const canAccessUnity = await this.testUnityAccess();
                    if (canAccessUnity) {
                        console.log('ğŸŒ æ£€æµ‹åˆ°å¯è®¿é—®Unityï¼Œæä¾›çœŸå®æ¨¡å¼é€‰é¡¹');
                        this.showRealModeOption();
                    }
                }, 5000);
            }
            
            // æµ‹è¯•Unityå¯è®¿é—®æ€§
            async testUnityAccess() {
                try {
                    const response = await fetch('https://cdn.unityads.unity3d.com/', { 
                        method: 'HEAD',
                        mode: 'no-cors'
                    });
                    return true;
                } catch (error) {
                    return false;
                }
            }
            
            // æ˜¾ç¤ºçœŸå®æ¨¡å¼é€‰é¡¹
            showRealModeOption() {
                const optionBtn = document.createElement('button');
                optionBtn.innerHTML = 'ğŸ”“ åˆ‡æ¢åˆ°çœŸå®æ¨¡å¼';
                optionBtn.style.cssText = `
                    position: fixed;
                    bottom: 20px;
                    right: 20px;
                    background: linear-gradient(135deg, #4CAF50, #2E7D32);
                    color: white;
                    border: none;
                    padding: 10px 15px;
                    border-radius: 25px;
                    font-size: 12px;
                    cursor: pointer;
                    box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
                    z-index: 1000;
                `;
                
                optionBtn.onclick = () => {
                    if (confirm('åˆ‡æ¢åˆ°çœŸå®æ”¶ç›Šæ¨¡å¼ï¼Ÿ\n\néœ€è¦ï¼š\nâœ… æµ·å¤–ç½‘ç»œæˆ–VPN\nâœ… Unity SDKå¯åŠ è½½\n\nç¡®å®šåˆ‡æ¢å—ï¼Ÿ')) {
                        this.switchToRealMode();
                    }
                };
                
                document.body.appendChild(optionBtn);
            }
            
            // åˆ‡æ¢åˆ°çœŸå®æ¨¡å¼
            switchToRealMode() {
                console.log('ğŸ”„ å°è¯•åˆ‡æ¢åˆ°çœŸå®æ¨¡å¼...');
                
                // å°è¯•åŠ è½½Unity SDK
                const script = document.createElement('script');
                script.src = 'https://cdn.unityads.unity3d.com/unity-ads-sdk.js';
                script.crossOrigin = 'anonymous';
                
                script.onload = () => {
                    if (typeof unityads !== 'undefined') {
                        console.log('âœ… Unity SDKåŠ è½½æˆåŠŸ');
                        
                        // åˆå§‹åŒ–Unity
                        unityads.init('6028834', {
                            testMode: false,
                            onInitialized: () => {
                                console.log('ğŸ‰ çœŸå®æ”¶ç›Šæ¨¡å¼å·²å¯ç”¨ï¼');
                                CONFIG.mode = 'real';
                                this.updateModeDisplay();
                                
                                alert('ğŸ‰ çœŸå®æ”¶ç›Šæ¨¡å¼å·²å¯ç”¨ï¼\nğŸ’° ç°åœ¨å¼€å§‹äº§ç”ŸçœŸå®ç¾å…ƒæ”¶ç›Šï¼');
                            },
                            onFailed: (error) => {
                                console.error('âŒ Unityåˆå§‹åŒ–å¤±è´¥:', error);
                                alert('âŒ çœŸå®æ¨¡å¼åˆ‡æ¢å¤±è´¥\nè¯·æ£€æŸ¥ç½‘ç»œæˆ–ç¨åé‡è¯•');
                            }
                        });
                    }
                };
                
                script.onerror = () => {
                    console.log('âŒ Unity SDKåŠ è½½å¤±è´¥');
                    alert('âŒ æ— æ³•åŠ è½½Unity SDK\nè¯·ç¡®ä¿ä½¿ç”¨æµ·å¤–ç½‘ç»œæˆ–VPN');
                };
                
                document.head.appendChild(script);
            }
            
            updateModeDisplay() {
                const statusEl = document.getElementById('mode-status');
                if (statusEl) {
                    if (CONFIG.mode === 'real') {
                        statusEl.innerHTML = 'ğŸ’° çœŸå®æ”¶ç›Šæ¨¡å¼';
                        statusEl.style.background = '#4CAF50';
                    } else {
                        statusEl.innerHTML = 'ğŸ¬ æ¨¡æ‹Ÿæ¨¡å¼';
                        statusEl.style.background = '#FF9800';
                    }
                }
            }
            
            // æ˜¾ç¤ºå¹¿å‘Š
            async showAd(adSlotId) {
                if (CONFIG.mode === 'real' && typeof unityads !== 'undefined') {
                    return this.showRealAd(adSlotId);
                } else {
                    return this.showSimulationAd(adSlotId);
                }
            }
            
            async showRealAd(adSlotId) {
                console.log(`ğŸ¬ å±•ç¤ºçœŸå®Unityå¹¿å‘Š ${adSlotId}`);
                
                const adUnits = {
                    1: 'youmeng1',
                    2: 'youmeng2', 
                    3: 'youmeng3'
                };
                
                return new Promise((resolve) => {
                    unityads.show(adUnits[adSlotId], {
                        onClosed: (result) => {
                            if (result && result.completed) {
                                console.log('âœ… çœŸå®å¹¿å‘Šå®Œæˆ');
                                this.recordAdComplete(adSlotId, true);
                                resolve({ success: true, isRealAd: true });
                            } else {
                                resolve({ success: false, message: 'å¹¿å‘Šæœªå®Œæˆ' });
                            }
                        },
                        onFailed: (error) => {
                            console.error('âŒ çœŸå®å¹¿å‘Šå¤±è´¥:', error);
                            // å¤±è´¥æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°æ¨¡æ‹Ÿå¹¿å‘Š
                            this.showSimulationAd(adSlotId).then(resolve);
                        }
                    });
                });
            }
            
            async showSimulationAd(adSlotId) {
                console.log(`ğŸ¬ å±•ç¤ºæ¨¡æ‹Ÿå¹¿å‘Š ${adSlotId}`);
                
                return new Promise((resolve) => {
                    // åˆ›å»ºæ¨¡æ‹Ÿå¹¿å‘Šç•Œé¢
                    this.createSimulationAd(adSlotId, resolve);
                });
            }
            
            createSimulationAd(adSlotId, resolve) {
                const overlay = document.createElement('div');
                overlay.style.cssText = `
                    position: fixed;
                    top: 0; left: 0;
                    width: 100%; height: 100%;
                    background: rgba(0,0,0,0.95);
                    z-index: 9999;
                    display: flex;
                    justify-content: center;
                    align-items: center;
                `;
                
                const earnings = CONFIG.baseEarnings * (0.8 + Math.random() * 0.4);
                
                overlay.innerHTML = `
                    <div style="background: linear-gradient(135deg, #1a1a2e, #16213e); color: white; border-radius: 15px; padding: 25px; max-width: 350px; width: 90%; text-align: center;">
                        <h3 style="color: #4CAF50; margin-bottom: 15px;">ğŸ¬ å¹¿å‘Šæ¼”ç¤º</h3>
                        
                        <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                            <div style="font-size: 40px; margin-bottom: 10px;">ğŸ“±</div>
                            <div style="font-weight: bold; margin-bottom: 5px;">æ¸¸æˆæ¨å¹¿å¹¿å‘Š</div>
                            <div style="font-size: 12px; opacity: 0.8;">å¹¿å‘Šä½ ${adSlotId} | 30ç§’æ¼”ç¤º</div>
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                                <span>å‰©ä½™: <span id="ad-timer">30</span>ç§’</span>
                                <span>æ”¶ç›Š: <span style="color: #4CAF50;">$${earnings.toFixed(2)}</span></span>
                            </div>
                            <div style="width: 100%; background: rgba(255,255,255,0.1); height: 6px; border-radius: 3px;">
                                <div id="ad-progress" style="width: 0%; height: 100%; background: #4CAF50; border-radius: 3px; transition: width 1s linear;"></div>
                            </div>
                        </div>
                        
                        <div>
                            <button id="complete-btn" style="background: #4CAF50; color: white; border: none; padding: 12px 30px; border-radius: 25px; cursor: pointer; font-weight: bold; width: 100%;">
                                ç«‹å³å®Œæˆ (+$${earnings.toFixed(2)})
                            </button>
                        </div>
                        
                        <div style="margin-top: 15px; font-size: 11px; opacity: 0.6;">
                            çœŸå®æ¨¡å¼ä¼šæ˜¾ç¤ºUnityç½‘ç»œå¹¿å‘Š
                        </div>
                    </div>
                `;
                
                document.body.appendChild(overlay);
                
                let timeLeft = 30;
                const timerEl = document.getElementById('ad-timer');
                const progressEl = document.getElementById('ad-progress');
                let timerInterval;
                
                function updateTimer() {
                    timeLeft--;
                    timerEl.textContent = timeLeft;
                    const progress = ((30 - timeLeft) / 30) * 100;
                    progressEl.style.width = `${progress}%`;
                    
                    if (timeLeft <= 0) {
                        completeAd();
                    }
                }
                
                timerInterval = setInterval(updateTimer, 1000);
                
                function completeAd() {
                    clearInterval(timerInterval);
                    document.body.removeChild(overlay);
                    
                    adSystem.recordAdComplete(adSlotId, false, earnings);
                    resolve({ success: true, isRealAd: false });
                }
                
                document.getElementById('complete-btn').onclick = completeAd;
            }
            
            recordAdComplete(adSlotId, isRealAd, earnings = CONFIG.baseEarnings) {
                const adId = adSlotId - 1;
                
                gameData.impressions++;
                gameData.clicks++;
                gameData.todayEarnings += earnings;
                gameData.totalEarnings += earnings;
                gameData.adEarnings[adId] += earnings;
                gameData.adCooldowns[adId] = CONFIG.adCooldown;
                
                this.addDailyRecord(adSlotId, earnings, isRealAd ? 'çœŸå®' : 'æ¨¡æ‹Ÿ');
                
                updateStats();
                updateCooldownDisplay();
                updateDailyRecords();
                
                this.updateAdStatus(adSlotId, isRealAd);
            }
            
            addDailyRecord(adSlotId, earnings, type) {
                const date = new Date();
                const dateStr = date.toLocaleDateString('zh-CN');
                const timeStr = date.toLocaleTimeString('zh-CN', { 
                    hour: '2-digit', 
                    minute: '2-digit',
                    hour12: false 
                });
                
                let dateGroup = gameData.dailyRecords.find(group => group.date === dateStr);
                
                if (!dateGroup) {
                    dateGroup = {
                        date: dateStr,
                        records: []
                    };
                    gameData.dailyRecords.unshift(dateGroup);
                }
                
                dateGroup.records.unshift({
                    time: timeStr,
                    adSlot: adSlotId,
                    earnings: earnings.toFixed(2),
                    type: type
                });
                
                if (dateGroup.records.length > 10) {
                    dateGroup.records = dateGroup.records.slice(0, 10);
                }
            }
            
            updateAdStatus(adSlotId, isRealAd) {
                const statusEl = document.getElementById(`status${adSlotId}`);
                const earningsEl = document.getElementById(`earnings${adSlotId}`);
                
                if (statusEl) {
                    statusEl.textContent = isRealAd ? 'âœ… çœŸå®å®Œæˆ' : 'âœ… æ¨¡æ‹Ÿå®Œæˆ';
                }
                
                if (earningsEl) {
                    earningsEl.textContent = '$' + gameData.adEarnings[adSlotId - 1].toFixed(2);
                    
                    // åŠ¨ç”»æ•ˆæœ
                    earningsEl.style.transform = 'scale(1.2)';
                    setTimeout(() => {
                        earningsEl.style.transform = 'scale(1)';
                    }, 300);
                }
            }
        }
        
        // ========== åˆå§‹åŒ– ==========
        const adSystem = new SmartAdSystem();
        
        // å†·å´è®¡æ—¶å™¨
        setInterval(() => {
            gameData.adCooldowns = gameData.adCooldowns.map(cd => 
                cd > 0 ? cd - 1 : 0
            );
            updateCooldownDisplay();
        }, 1000);
        
        // æ˜¾ç¤ºå¹¿å‘Š
        async function showAd(adIndex) {
            const adId = adIndex - 1;
            
            if (gameData.adCooldowns[adId] > 0) {
                alert(`å†·å´ä¸­ï¼Œè¯·ç­‰å¾… ${gameData.adCooldowns[adId]} ç§’`);
                return;
            }
            
            const btn = document.getElementById(`btn${adIndex}`);
            const statusEl = document.getElementById(`status${adIndex}`);
            
            btn.disabled = true;
            btn.innerHTML = 'â³ åŠ è½½ä¸­...';
            statusEl.innerHTML = 'â³ å‡†å¤‡å¹¿å‘Š...';
            
            try {
                const result = await adSystem.showAd(adIndex);
                
                if (result.success) {
                    if (result.isRealAd) {
                        statusEl.innerHTML = 'âœ… çœŸå®å®Œæˆ';
                    } else {
                        statusEl.innerHTML = 'âœ… æ¨¡æ‹Ÿå®Œæˆ';
                    }
                } else {
                    statusEl.innerHTML = `âš ï¸ ${result.message}`;
                }
            } catch (error) {
                console.error('å¹¿å‘Šé”™è¯¯:', error);
                statusEl.innerHTML = 'âŒ å¹¿å‘Šå¤±è´¥';
            }
            
            setTimeout(() => {
                btn.disabled = false;
                btn.innerHTML = 'ğŸ¬ è§‚çœ‹å¹¿å‘Š';
            }, 1000);
        }
        
        // æ›´æ–°å†·å´æ˜¾ç¤º
        function updateCooldownDisplay() {
            for (let i = 0; i < 3; i++) {
                const statusEl = document.getElementById(`status${i + 1}`);
                const btn = document.getElementById(`btn${i + 1}`);
                
                const cd = gameData.adCooldowns[i];
                if (cd > 0) {
                    statusEl.innerHTML = `â³ ${cd}ç§’`;
                    btn.disabled = true;
                    btn.innerHTML = `å†·å´ä¸­`;
                } else {
                    statusEl.innerHTML = 'âœ… å‡†å¤‡å°±ç»ª';
                    btn.disabled = false;
                    btn.innerHTML = 'ğŸ¬ è§‚çœ‹å¹¿å‘Š';
                }
            }
        }
        
        // æ›´æ–°ç»Ÿè®¡
        function updateStats() {
            document.getElementById('impressions').textContent = gameData.impressions;
            document.getElementById('todayEarnings').textContent = '$' + gameData.todayEarnings.toFixed(2);
            document.getElementById('totalEarnings').textContent = '$' + gameData.totalEarnings.toFixed(2);
            
            const clickRate = gameData.impressions > 0 ? 
                ((gameData.clicks / gameData.impressions) * 100).toFixed(1) : 0;
            document.getElementById('clickRate').textContent = clickRate + '%';
            
            for (let i = 0; i < 3; i++) {
                const el = document.getElementById(`earnings${i + 1}`);
                if (el) el.textContent = '$' + gameData.adEarnings[i].toFixed(2);
            }
            
            saveGameData();
        }
        
        // æ›´æ–°æ—¥æ”¶ç›Šè®°å½•
        function updateDailyRecords() {
            const tbody = document.getElementById('dailyRecords');
            if (!tbody) return;
            
            tbody.innerHTML = '';
            
            if (gameData.dailyRecords.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="4" style="text-align:center;padding:20px;color:#aaa;">æš‚æ— è®°å½•</td>
                    </tr>
                `;
                return;
            }
            
            gameData.dailyRecords.forEach(dateGroup => {
                dateGroup.records.forEach((record, index) => {
                    const row = document.createElement('tr');
                    row.style.borderBottom = '1px solid rgba(255,255,255,0.1)';
                    row.innerHTML = `
                        <td style="padding:8px;">${index === 0 ? dateGroup.date : ''}</td>
                        <td style="padding:8px;">${record.time}</td>
                        <td style="padding:8px;">å¹¿å‘Šä½ ${record.adSlot}</td>
                        <td style="padding:8px;color:${record.type === 'çœŸå®' ? '#4CAF50' : '#FF9800'};font-weight:bold;">
                            $${record.earnings}
                        </td>
                    `;
                    tbody.appendChild(row);
                });
            });
        }
        
        // ä¿å­˜æ•°æ®
        function saveGameData() {
            try {
                localStorage.setItem('adGameData', JSON.stringify(gameData));
            } catch (error) {
                console.log('ä¿å­˜å¤±è´¥:', error);
            }
        }
        
        // åŠ è½½æ•°æ®
        function loadGameData() {
            try {
                const saved = localStorage.getItem('adGameData');
                if (saved) {
                    const parsed = JSON.parse(saved);
                    const today = new Date().toLocaleDateString('zh-CN');
                    
                    if (parsed.todayDate !== today) {
                        parsed.todayEarnings = 0;
                        parsed.todayDate = today;
                        parsed.adCooldowns = [0, 0, 0];
                    }
                    
                    gameData = {
                        ...gameData,
                        ...parsed,
                        adCooldowns: parsed.adCooldowns || [0, 0, 0],
                        adEarnings: parsed.adEarnings || [0, 0, 0],
                        dailyRecords: parsed.dailyRecords || []
                    };
                    
                    updateStats();
                    updateDailyRecords();
                    updateCooldownDisplay();
                }
            } catch (error) {
                console.log('åŠ è½½å¤±è´¥:', error);
            }
        }
        
        // ========== æ§åˆ¶åŠŸèƒ½ ==========
        window.showAllAds = function() {
            for (let i = 1; i <= 3; i++) {
                if (gameData.adCooldowns[i - 1] === 0) {
                    setTimeout(() => showAd(i), i * 1000);
                }
            }
        };
        
        window.resetGame = function() {
            if (confirm('ç¡®å®šé‡ç½®æ‰€æœ‰æ¸¸æˆæ•°æ®ï¼Ÿ')) {
                gameData = {
                    impressions: 0,
                    clicks: 0,
                    todayEarnings: 0,
                    totalEarnings: 0,
                    adCooldowns: [0, 0, 0],
                    adEarnings: [0, 0, 0],
                    dailyRecords: [],
                    todayDate: new Date().toLocaleDateString('zh-CN')
                };
                
                updateStats();
                updateDailyRecords();
                updateCooldownDisplay();
                
                alert('âœ… æ•°æ®å·²é‡ç½®ï¼');
            }
        };
        
        window.showModeInfo = function() {
            const info = `
ğŸ® å½“å‰æ¨¡å¼ï¼š${CONFIG.mode === 'real' ? 'çœŸå®æ”¶ç›Š' : 'æ¨¡æ‹Ÿæ¼”ç¤º'}

${CONFIG.mode === 'real' ? 
'ğŸ’° çœŸå®æ”¶ç›Šæ¨¡å¼ï¼š\n' +
'- æ˜¾ç¤ºUnityçœŸå®å¹¿å‘Š\n' +
'- äº§ç”ŸçœŸå®ç¾å…ƒæ”¶ç›Š\n' +
'- æ”¶ç›Šè®¡å…¥Unityåå°\n' +
'- è¾¾åˆ°$50å¯æç°PayPal\n\n' +
'âš ï¸ éœ€è¦æµ·å¤–ç½‘ç»œæˆ–VPNè¿æ¥' :

'ğŸ¬ æ¨¡æ‹Ÿæ¼”ç¤ºæ¨¡å¼ï¼š\n' +
'- æ˜¾ç¤ºæœ¬åœ°æ¨¡æ‹Ÿå¹¿å‘Š\n' +
'- åŠŸèƒ½å®Œæ•´ä½“éªŒè‰¯å¥½\n' +
'- æ”¶ç›Šä¸ºæ¼”ç¤ºæ•°æ®\n' +
'- æ‰€æœ‰ç”¨æˆ·å‡å¯ä½¿ç”¨\n\n' +
'ğŸ”“ åˆ‡æ¢åˆ°çœŸå®æ¨¡å¼éœ€è¦VPN'
}

ğŸŒ ç½‘ç»œè¯´æ˜ï¼š
- ä¸­å›½å¤§é™†è®¿é—®Unityå—é™
- æµ·å¤–/VPNç”¨æˆ·å¯åˆ‡æ¢çœŸå®æ¨¡å¼
- æ¨¡æ‹Ÿæ¨¡å¼ç¡®ä¿æ‰€æœ‰ç”¨æˆ·å¯ç”¨

ğŸ’¡ å»ºè®®ï¼š
1. å…ˆç”¨æ¨¡æ‹Ÿæ¨¡å¼ç§¯ç´¯ç”¨æˆ·
2. å¼•å¯¼æœ‰æ¡ä»¶ç”¨æˆ·ä½¿ç”¨VPN
3. çœŸå®æ¨¡å¼ä½œä¸ºé«˜çº§é€‰é¡¹
            `;
            
            alert(info);
        };
        
        // ========== é¡µé¢åŠ è½½ ==========
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ® æ™ºèƒ½å…¼å®¹ç‰ˆæ¸¸æˆåŠ è½½å®Œæˆ');
            console.log('ğŸ‘¤ å¼€å‘è€…: youmeng00000');
            console.log('ğŸŒ éƒ¨ç½²: Vercel');
            console.log('ğŸ¯ ç­–ç•¥: æ¨¡æ‹Ÿä¸ºä¸»ï¼ŒçœŸå®ä¸ºè¾…');
            
            loadGameData();
            
            setInterval(saveGameData, 30000);
            
            console.log('âœ… æ¸¸æˆå°±ç»ªï¼Œæ¬¢è¿ä½“éªŒï¼');
        });
        
        // è‡ªåŠ¨ä¿å­˜
        window.addEventListener('beforeunload', saveGameData);
    </script>
</body>
</html>
